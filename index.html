<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="title.full">Outlier Cleaner - Telemetry Data Processing</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
    <link rel="stylesheet" href="css/telemetry.css">
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
    <!-- i18n system -->
    <script src="js/i18n.js"></script>
    <!-- Utility functions for performance optimization -->
    <script src="js/utils.js"></script>
    <!-- Error handling system -->
    <script src="js/error.js"></script>
    <!-- Core modules -->
    <script src="js/storage.js"></script>
    <script src="js/export.js"></script>
    <script src="js/queue.js"></script>
    <script src="js/chart.js"></script>
    <script src="js/ui.js"></script>
</head>
<body>
    <!-- Skip to main content for keyboard users -->
    <a href="#main-content" class="skip-to-content">Skip to main content</a>
    <div class="crt-overlay" aria-hidden="true"></div>
    <div class="main-container">
        <!-- Header -->
        <header class="telemetry-header" role="banner">
            <div class="header-decoration left"></div>
            <h1 class="main-title">
                <span class="title-prefix" data-i18n="title.prefix">–û–¢–ö-001</span>
                <span class="title-divider">///</span>
                <span class="title-main" data-i18n="title.main">–°–ò–°–¢–ï–ú–ê –û–ß–ò–°–¢–ö–ò –î–ê–ù–ù–´–•</span>
            </h1>
            <!-- Language Switcher -->
            <div class="language-switcher" role="navigation" aria-label="Language selection">
                <span class="lang-label" data-i18n="lang.switch" aria-hidden="true">Language / –Ø–∑—ã–∫</span>
                <button class="lang-button" data-lang="ru" aria-label="Switch to Russian">üá∑üá∫ RU</button>
                <button class="lang-button" data-lang="en" aria-label="Switch to English">üá∫üá∏ EN</button>
            </div>
            <div class="header-decoration right"></div>
        </header>

        <!-- Main Content Grid -->
        <div class="content-grid" role="main" id="main-content">
            <!-- Left Panel: Control Panel -->
            <section class="control-panel panel" aria-labelledby="control-panel-title">
                <div class="panel-header">
                    <span class="panel-id" id="control-panel-title" data-i18n="panel.control">–ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø</span>
                    <span class="panel-status status-ready" data-i18n="panel.status.ready" data-i18n-title="tooltip.status.ready" role="status" aria-live="polite">–ì–û–¢–û–í</span>
                </div>

                <!-- File Loading Section -->
                <div class="control-section">
                    <h2 class="section-title" data-i18n="section.load" id="load-section-title">1. –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–•</h2>
                    <div class="input-group" aria-labelledby="load-section-title">
                        <label for="fileInput" class="input-label" id="file-input-label">
                            <span class="label-text" data-i18n="label.file">–í—ã–±–æ—Ä —Ñ–∞–π–ª–∞ –¥–∞–Ω–Ω—ã—Ö:</span>
                            <span class="label-desc" id="file-input-desc" data-i18n="desc.file">ASCII —Ñ–æ—Ä–º–∞—Ç, —Å—Ç–æ–ª–±—Ü—ã: –≤—Ä–µ–º—è, —Å–∏–≥–Ω–∞–ª—ã...</span>
                        </label>
                        <div class="file-input-wrapper">
                            <input type="file" id="fileInput" multiple accept=".txt,.dat,.csv,.asc" class="file-input" aria-label="Select data files" aria-describedby="file-input-desc">
                            <button type="button" class="file-button" aria-label="Open file dialog" onclick="document.getElementById('fileInput').click()">
                                <span class="button-icon">üìÅ</span>
                                <span class="button-text" data-i18n="button.open">–û–¢–ö–†–´–¢–¨ –§–ê–ô–õ</span>
                            </button>
                            <div id="fileCount" class="file-count" data-i18n="file.count" data-i18n-params='{"count": 0}' aria-live="polite" aria-atomic="true">–í—ã–±—Ä–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: 0</div>
                        </div>
                    </div>
                    <div id="selectedFiles" class="selected-files-list"></div>

                    <!-- Batch Processing Controls -->
                    <div class="batch-controls" id="batchControls" role="group" aria-label="Batch processing controls" style="display: none;">
                        <button type="button" id="batchProcessBtn" class="batch-button batch-process" aria-label="Process all loaded files">
                            <span class="button-icon" aria-hidden="true">‚ñ∂Ô∏è</span>
                            <span class="button-text" data-i18n="button.batchProcess">–û–ë–†–ê–ë–û–¢–ê–¢–¨ –í–°–ï –§–ê–ô–õ–´</span>
                        </button>
                        <button type="button" id="batchCancelBtn" class="batch-button batch-cancel" aria-label="Cancel batch processing">
                            <span class="button-icon" aria-hidden="true">‚èπÔ∏è</span>
                            <span class="button-text" data-i18n="button.batchCancel">–û–¢–ú–ï–ù–ò–¢–¨</span>
                        </button>
                    </div>
                </div>

                <!-- Prominent File Info Display -->
                <div class="control-section prominent-file-info" aria-label="File information">
                    <div class="file-info-display">
                        <div class="info-display-item">
                            <span class="info-display-label" data-i18n="info.points" id="points-label">–¢–û–ß–ï–ö</span>
                            <span id="prominentPoints" class="info-display-value" aria-labelledby="points-label">--</span>
                        </div>
                        <div class="info-display-item">
                            <span class="info-display-label" data-i18n="info.series" id="series-label">–°–ï–†–ò–ô</span>
                            <span id="prominentSeries" class="info-display-value" aria-labelledby="series-label">--</span>
                        </div>
                        <div class="info-display-item">
                            <span class="info-display-label" data-i18n="label.file" id="files-label">–§–ê–ô–õ–û–í</span>
                            <span id="prominentFileCount" class="info-display-value" aria-labelledby="files-label">0</span>
                        </div>
                    </div>
                </div>

                <!-- Advanced Settings Toggle -->
                <div class="control-section prominent-toggle">
                    <div class="settings-toggle enhanced">
                        <label for="advancedToggle" class="toggle-label">
                            <span class="toggle-icon">‚öôÔ∏è</span>
                            <input type="checkbox" id="advancedToggle" class="toggle-checkbox">
                            <span class="toggle-slider"></span>
                            <span class="toggle-text" data-i18n="toggle.advanced">–û–¢–ö–†–´–¢–¨ –ö–ê–ü–û–¢ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)</span>
                        </label>
                        <span class="toggle-desc" data-i18n="desc.advanced">–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞</span>
                        <div class="params-preview" id="paramsPreview" data-i18n="paramsPreview" data-i18n-params='{"window":40,"threshold":1.4,"method":"movmean"}'></div>
                    </div>
                </div>

                <!-- Advanced Parameters (Hidden by default) -->
                <div id="advancedSettings" class="advanced-settings hidden" role="region" aria-labelledby="params-section-title">
                    <h2 class="section-title" data-i18n="section.params" id="params-section-title">–ü–ê–†–ê–ú–ï–¢–†–´ –ê–õ–ì–û–†–ò–¢–ú–ê</h2>

                    <!-- Window Width Slider -->
                    <div class="slider-group">
                        <label class="slider-label" id="window-width-label">
                            <span class="slider-name" data-i18n="label.window">–®–∏—Ä–∏–Ω–∞ –æ–∫–Ω–∞</span>
                            <span class="slider-desc" id="window-width-desc" data-i18n="desc.window">–†–∞–∑–º–µ—Ä —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ –æ–∫–Ω–∞ (1-100)</span>
                        </label>
                        <div class="slider-control">
                            <input type="range" id="windowWidth" min="1" max="100" value="40" class="slider" aria-labelledby="window-width-label" aria-describedby="window-width-desc">
                            <div class="slider-value" aria-live="polite">
                                <span id="windowWidthValue" class="value-display">40</span>
                                <span class="value-unit" data-i18n="unit.window" aria-hidden="true">–µ–¥.</span>
                            </div>
                        </div>
                    </div>

                    <!-- Threshold Slider -->
                    <div class="slider-group">
                        <label class="slider-label" id="threshold-label">
                            <span class="slider-name" data-i18n="label.threshold">–ü–æ—Ä–æ–≥–æ–≤—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç</span>
                            <span class="slider-desc" id="threshold-desc" data-i18n="desc.threshold">–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è (0.1-2.0)</span>
                        </label>
                        <div class="slider-control">
                            <input type="range" id="threshold" min="0.1" max="2.0" step="0.1" value="1.4" class="slider" aria-labelledby="threshold-label" aria-describedby="threshold-desc">
                            <div class="slider-value" aria-live="polite">
                                <span id="thresholdValue" class="value-display">1.4</span>
                            </div>
                        </div>
                    </div>

                    <!-- Matrix Size Slider -->
                    <div class="slider-group">
                        <label class="slider-label" id="matrix-size-label">
                            <span class="slider-name" data-i18n="label.matrix">–†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã –Ω–∞–≤–æ–¥–∫–∏</span>
                            <span class="slider-desc" id="matrix-size-desc" data-i18n="desc.matrix">–†–∞–∑–º–µ—Ä —Å–µ—Ç–∫–∏ –ø–æ–∏—Å–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (10-50)</span>
                        </label>
                        <div class="slider-control">
                            <input type="range" id="matrixSize" min="10" max="50" value="16" class="slider" aria-labelledby="matrix-size-label" aria-describedby="matrix-size-desc">
                            <div class="slider-value" aria-live="polite">
                                <span id="matrixSizeValue" class="value-display">16</span>
                                <span class="value-unit" aria-hidden="true">√ó16</span>
                            </div>
                        </div>
                    </div>

                    <!-- Relative Size Slider -->
                    <div class="slider-group">
                        <label class="slider-label" id="relative-size-label">
                            <span class="slider-name" data-i18n="label.relative">–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä 2 –º–∞—Ç—Ä–∏—Ü—ã</span>
                            <span class="slider-desc" id="relative-size-desc" data-i18n="desc.relative">–®–∞–≥ –≥—Ä—É–±–æ–≥–æ –ø–æ–∏—Å–∫–∞ (1-9)</span>
                        </label>
                        <div class="slider-control">
                            <input type="range" id="relativeSize" min="1" max="9" value="4" class="slider" aria-labelledby="relative-size-label" aria-describedby="relative-size-desc">
                            <div class="slider-value" aria-live="polite">
                                <span id="relativeSizeValue" class="value-display">4</span>
                            </div>
                        </div>
                    </div>

                    <!-- Optimization Section -->
                    <div class="optimization-section">
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="useChunks" checked class="checkbox" aria-describedby="use-chunks-desc">
                                <span class="checkbox-text" data-i18n="checkbox.chunks">–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —á–∞–Ω–∫–∏</span>
                                <span class="checkbox-desc" id="use-chunks-desc" data-i18n="desc.optimization">–£—Å–∫–æ—Ä—è–µ—Ç –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä –≤ 5-10 —Ä–∞–∑</span>
                            </label>
                        </div>

                        <div class="slider-group">
                            <label class="slider-label" id="num-chunks-label">
                                <span class="slider-name" data-i18n="label.chunks">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö —á–∞–Ω–∫–æ–≤</span>
                                <span class="slider-desc" id="num-chunks-desc" data-i18n="desc.chunks">–ß–∞–Ω–∫=25 —Ç–æ—á–µ–∫ (1-5)</span>
                            </label>
                            <div class="slider-control">
                                <input type="range" id="numChunks" min="1" max="5" value="3" class="slider" aria-labelledby="num-chunks-label" aria-describedby="num-chunks-desc">
                                <div class="slider-value" aria-live="polite">
                                    <span id="numChunksValue" class="value-display">3</span>
                                    <span class="value-unit" data-i18n="unit.chunks" aria-hidden="true">—à—Ç.</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Fill Method Dropdown -->
                    <div class="dropdown-group">
                        <label class="dropdown-label" id="fill-method-label">
                            <span class="dropdown-name" data-i18n="label.fillMethod">–ú–µ—Ç–æ–¥ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã–±—Ä–æ—Å–æ–≤</span>
                            <span class="dropdown-desc" id="fill-method-desc" data-i18n="desc.fillMethod">–°–ø–æ—Å–æ–± –∑–∞–º–µ—â–µ–Ω–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –∞–Ω–æ–º–∞–ª–∏–π</span>
                        </label>
                        <select id="fillMethod" class="dropdown" aria-labelledby="fill-method-label" aria-describedby="fill-method-desc">
                            <option value="extreme" data-i18n="fillMethod.extreme">‚Üó‚àû –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞)</option>
                            <option value="center" data-i18n="fillMethod.center">–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–º–µ–¥–∏–∞–Ω–∞/—Å—Ä–µ–¥–Ω–µ–µ)</option>
                            <option value="clip" data-i18n="fillMethod.clip">–ü–æ—Ä–æ–≥–æ–≤–∞—è –æ–±—Ä–µ–∑–∫–∞</option>
                            <option value="previous" data-i18n="fillMethod.previous">–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –≤–µ—Ä–Ω–æ–µ</option>
                            <option value="next" data-i18n="fillMethod.next">–°–ª–µ–¥—É—é—â–µ–µ –≤–µ—Ä–Ω–æ–µ</option>
                            <option value="nearest" selected data-i18n="fillMethod.nearest">–ë–ª–∏–∂–∞–π—à–µ–µ –≤–µ—Ä–Ω–æ–µ</option>
                            <option value="linear" data-i18n="fillMethod.linear">–õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è</option>
                            <option value="spline" data-i18n="fillMethod.spline">–°–ø–ª–∞–π–Ω-–∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è</option>
                            <option value="pchip" data-i18n="fillMethod.pchip">–°–ø–ª–∞–π–Ω¬≤ (PCHIP)</option>
                            <option value="makima" data-i18n="fillMethod.makima">–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ê–∫–∏–º—ã</option>
                        </select>
                    </div>

                    <!-- Presets Section -->
                    <div class="presets-section">
                        <h3 class="presets-title" data-i18n="presets.title" id="presets-title">–ü—Ä–µ—Å–µ—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫</h3>
                        <div class="presets-controls">
                            <select id="presetSelect" class="crt-select preset-select" aria-labelledby="presets-title">
                                <option value="" data-i18n="presets.select">-- –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ—Å–µ—Ç --</option>
                            </select>
                            <button id="applyPresetBtn" class="crt-button preset-apply" data-i18n="presets.apply" aria-label="Apply preset">‚úì</button>
                            <button id="savePresetBtn" class="crt-button preset-save" data-i18n="presets.save" aria-label="Save current as preset">üíæ</button>
                            <button id="deletePresetBtn" class="crt-button preset-delete" data-i18n="presets.delete" aria-label="Delete current preset">üóë</button>
                        </div>
                        <div class="presets-info" data-i18n="presets.info" aria-hidden="true">–ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏</div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="control-section">
                    <h2 class="section-title" data-i18n="section.operations">2. –û–ü–ï–†–ê–¶–ò–ò</h2>
                    <div class="button-grid" role="group" aria-label="Operation buttons">
                        <button id="loadBtn" class="action-button" disabled aria-label="Load data - Step 1">
                            <span class="button-number" aria-hidden="true">1.</span>
                            <span class="button-label" data-i18n="button.load">–ó–ê–ì–†–£–ó–ò–¢–¨</span>
                            <span class="button-desc" data-i18n="desc.load">–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –¥–∞–Ω–Ω—ã—Ö</span>
                        </button>

                        <button id="tuneBtn" class="action-button" disabled aria-label="Auto-tune parameters - Step 2">
                            <span class="button-number" aria-hidden="true">2.</span>
                            <span class="button-label" data-i18n="button.tune">–ù–ê–í–ï–°–¢–¨–°–Ø</span>
                            <span class="button-desc" data-i18n="desc.tune">–ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</span>
                        </button>

                        <button id="cleanBtn" class="action-button" disabled aria-label="Clean data - Step 3">
                            <span class="button-number" aria-hidden="true">3.</span>
                            <span class="button-label" data-i18n="button.clean">–û–ß–ò–°–¢–ò–¢–¨</span>
                            <span class="button-desc" data-i18n="desc.clean">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é</span>
                        </button>

                        <button id="saveBtn" class="action-button" disabled aria-label="Save results - Step 4">
                            <span class="button-number" aria-hidden="true">4.</span>
                            <span class="button-label" data-i18n="button.save">–°–û–•–†–ê–ù–ò–¢–¨</span>
                            <span class="button-desc" data-i18n="desc.save">–≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</span>
                        </button>
                    </div>

                    <!-- Reset Button -->
                    <button id="resetBtn" class="reset-button" aria-label="Reset session and clear all data">
                        <span class="button-icon" aria-hidden="true">‚ö†</span>
                        <span class="button-label" data-i18n="button.reset">–°–ë–†–û–° –°–ï–°–°–ò–ò</span>
                        <span class="button-desc" data-i18n="desc.reset">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</span>
                    </button>

                    <!-- Batch Export Button -->
                    <button id="exportBatchBtn" class="action-button batch-export" style="display: none;" aria-label="Export all batch results">
                        <span class="button-icon" aria-hidden="true">üì¶</span>
                        <span class="button-label" data-i18n="button.exportBatch">–≠–ö–°–ü–û–†–¢ –í–°–ï–• –†–ï–ó–£–õ–¨–¢–ê–¢–û–í</span>
                        <span class="button-desc" data-i18n="desc.save">–≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤</span>
                    </button>
                </div>

                <!-- Reset Confirmation Modal -->
                <div id="resetModal" class="modal-overlay" role="dialog" aria-labelledby="reset-modal-title" aria-modal="true">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title" id="reset-modal-title" data-i18n="modal.reset.title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–±—Ä–æ—Å–∞</h3>
                            <button class="modal-close" data-i18n="modal.close" aria-label="Close dialog">‚úï</button>
                        </div>
                        <div class="modal-body">
                            <p class="modal-text" data-i18n="modal.reset.message">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é?</p>
                            <p class="modal-warning" data-i18n="modal.reset.warning" role="alert">‚ö† –í—Å–µ –¥–∞–Ω–Ω—ã–µ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã!</p>
                        </div>
                        <div class="modal-footer">
                            <button id="confirmResetBtn" class="modal-button modal-confirm" data-i18n="modal.confirm">–î–∞, —Å–±—Ä–æ—Å–∏—Ç—å</button>
                            <button id="cancelResetBtn" class="modal-button modal-cancel" data-i18n="modal.cancel">–û—Ç–º–µ–Ω–∞</button>
                        </div>
                    </div>
                </div>

                <!-- Save Options -->
                <div class="control-section">
                    <h2 class="section-title" data-i18n="section.save">3. –ü–ê–†–ê–ú–ï–¢–†–´ –°–û–•–†–ê–ù–ï–ù–ò–Ø</h2>
                    
                    <div class="control-group">
                        <label class="control-label" for="exportFormat" id="export-format-label" data-i18n="label.exportFormat">–§–æ—Ä–º–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞:</label>
                        <select id="exportFormat" class="control-select" aria-labelledby="export-format-label">
                            <option value="csv" data-i18n="exportFormat.csv">CSV (Comma Separated Values)</option>
                            <option value="txt" data-i18n="exportFormat.txt">TXT (ASCII)</option>
                        </select>
                    </div>

                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="saveRestored" checked class="checkbox" aria-describedby="save-restored-desc">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text" data-i18n="checkbox.saveRestored">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</span>
                        </label>
                        <span class="checkbox-desc" id="save-restored-desc" data-i18n="desc.saveRestored">–í–∫–ª—é—á–∏—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è</span>
                    </div>
                    <div class="checkbox-group">
                        <label class="checkbox-label" id="validityFlagWrapper">
                            <input type="checkbox" id="addValidityFlag" checked class="checkbox" aria-describedby="validity-flag-desc">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text" data-i18n="checkbox.validityFlag">–î–æ–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–º –∏—Å—Ç–∏–Ω–Ω–æ—Å—Ç–∏</span>
                        </label>
                        <span class="checkbox-desc" id="validity-flag-desc" data-i18n="desc.validityFlag">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª–±–µ—Ü —Å —Ñ–ª–∞–≥–æ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ (0/1)</span>
                    </div>
                </div>

                <!-- Report Export -->
                <div class="control-section">
                    <h2 class="section-title" data-i18n="section.report">4. –≠–ö–°–ü–û–†–¢ –û–¢–ß–ï–¢–ê</h2>
                    <div class="button-grid" role="group" aria-label="Report export buttons">
                        <button id="exportJsonBtn" class="action-button" disabled aria-label="Export JSON report">
                            <span class="button-icon" aria-hidden="true">üìÑ</span>
                            <span class="button-label" data-i18n="button.exportJson">JSON –û–¢–ß–ï–¢</span>
                            <span class="button-desc" data-i18n="desc.exportJson">–≠–∫—Å–ø–æ—Ä—Ç –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç</span>
                        </button>

                        <button id="exportHtmlBtn" class="action-button" disabled aria-label="Export HTML report">
                            <span class="button-icon" aria-hidden="true">üìä</span>
                            <span class="button-label" data-i18n="button.exportHtml">HTML –û–¢–ß–ï–¢</span>
                            <span class="button-desc" data-i18n="desc.exportHtml">–≠–∫—Å–ø–æ—Ä—Ç —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏</span>
                        </button>

                        <button id="exportErrorLogBtn" class="action-button" onclick="ErrorHandler.exportLog()" aria-label="Export error log">
                            <span class="button-icon" aria-hidden="true">üìã</span>
                            <span class="button-label" data-i18n="button.exportErrorLog">–ñ–£–†–ù–ê–õ –û–®–ò–ë–û–ö</span>
                            <span class="button-desc" data-i18n="desc.exportErrorLog">–≠–∫—Å–ø–æ—Ä—Ç –∂—É—Ä–Ω–∞–ª–∞ –æ—à–∏–±–æ–∫</span>
                        </button>
                    </div>
                </div>

                <!-- Progress Section -->
                <div class="control-section">
                    <h2 class="section-title" data-i18n="section.progress">4. –•–û–î –ü–†–û–¶–ï–°–°–ê</h2>
                    <div class="gauge-container" aria-label="Progress gauge">
                        <svg class="gauge" viewBox="0 0 180 100" aria-hidden="true">
                            <defs>
                                <linearGradient id="gaugeGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#00ff88"/>
                                    <stop offset="50%" style="stop-color:#ffff00"/>
                                    <stop offset="100%" style="stop-color:#ff4444"/>
                                </linearGradient>
                            </defs>
                            <!-- Background arc -->
                            <path d="M 10 90 A 80 80 0 0 1 170 90" fill="none" stroke="#003322" stroke-width="20"/>
                            <!-- Progress arc -->
                            <path id="progressArc" d="M 10 90 A 80 80 0 0 1 170 90" fill="none"
                                  stroke="url(#gaugeGradient)" stroke-width="20"
                                  stroke-dasharray="251.2" stroke-dashoffset="251.2"
                                  stroke-linecap="round"/>
                            <!-- Center text -->
                            <text x="90" y="75" text-anchor="middle" class="gauge-text-main"
                                  id="progressText">0%</text>
                        </svg>
                    </div>
                </div>

                <!-- Log Section -->
                <div class="control-section log-section">
                    <h2 class="section-title" data-i18n="section.log">5. –ñ–£–†–ù–ê–õ –û–ü–ï–†–ê–¶–ò–ô</h2>
                    <div id="logArea" class="log-area" role="log" aria-live="polite" aria-label="Operation log">
                        <div class="log-entry log-info">
                            <span class="log-time" aria-hidden="true">--:--:--</span>
                            <span class="log-message" data-i18n="log.init">–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ. –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Right Panel: Visualization -->
            <section class="plot-panel panel" aria-labelledby="plot-panel-title">
                <div class="panel-header">
                    <span class="panel-id" id="plot-panel-title" data-i18n="panel.visualization">–ü–ê–ù–ï–õ–¨ –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–ò</span>
                    <span class="panel-status status-ready" data-i18n="panel.status.online" data-i18n-title="tooltip.status.online" role="status" aria-live="polite">–û–ù–õ–ê–ô–ù</span>
                </div>

                <!-- Tab Navigation -->
                <div class="tab-nav" role="tablist" aria-label="View tabs">
                    <button class="tab-button active" data-tab="data" role="tab" aria-selected="true" aria-controls="dataTab">
                        <span class="tab-icon" aria-hidden="true">üìä</span>
                        <span class="tab-text" data-i18n="tab.data">–î–ê–ù–ù–´–ï</span>
                    </button>
                    <button class="tab-button" data-tab="heatmap" role="tab" aria-selected="false" aria-controls="heatmapTab">
                        <span class="tab-icon" aria-hidden="true">üå°Ô∏è</span>
                        <span class="tab-text" data-i18n="tab.heatmap">–ö–ê–†–¢–ê –ü–ê–†–ê–ú–ï–¢–†–û–í</span>
                    </button>
                </div>

                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- Data Plot Tab -->
                    <div id="dataTab" class="tab-pane active" role="tabpanel" aria-labelledby="dataTab-btn">
                        <!-- Chart Visibility Toolbar -->
                        <div class="chart-toolbar" role="toolbar" aria-label="Chart and view controls">
                            <div class="view-toggle" role="group" aria-label="View toggle">
                                <button id="chartViewBtn" class="view-btn active" data-i18n="chart.view" aria-label="Switch to chart view" aria-pressed="true">
                                    <span class="view-icon" aria-hidden="true">üìä</span>
                                </button>
                                <button id="tableViewBtn" class="view-btn" data-i18n="table.view" aria-label="Switch to table view" aria-pressed="false">
                                    <span class="view-icon" aria-hidden="true">üìã</span>
                                </button>
                            </div>
                            <span class="toolbar-label" data-i18n="chart.visibility" aria-hidden="true">Visibility:</span>
                            <div class="visibility-buttons" role="group" aria-label="Dataset visibility">
                                <button class="visibility-btn" data-visibility="original" aria-label="Show original data" aria-pressed="true">
                                    <span class="vis-icon" aria-hidden="true">üî¥</span>
                                    <span class="vis-text" data-i18n="chart.showOriginal">Original</span>
                                </button>
                                <button class="visibility-btn" data-visibility="cleaned" aria-label="Show cleaned data" aria-pressed="true">
                                    <span class="vis-icon" aria-hidden="true">üü¢</span>
                                    <span class="vis-text" data-i18n="chart.showCleaned">Cleaned</span>
                                </button>
                                <button class="visibility-btn active" data-visibility="both" aria-label="Show both datasets" aria-pressed="true">
                                    <span class="vis-icon" aria-hidden="true">üìä</span>
                                    <span class="vis-text" data-i18n="chart.showBoth">Both</span>
                                </button>
                            </div>
                        </div>
                        <div class="chart-container" id="dropZone" role="region" aria-label="Data visualization area">
                            <div class="chart-wrapper">
                                <div class="zoom-controls" role="group" aria-label="Zoom controls">
                                    <button id="zoomInBtn" class="zoom-button" data-i18n="tooltip.zoomIn" aria-label="Zoom in">‚§¥</button>
                                    <button id="zoomOutBtn" class="zoom-button" data-i18n="tooltip.zoomOut" aria-label="Zoom out">‚§µ</button>
                                    <button id="zoomResetBtn" class="zoom-button" data-i18n="tooltip.resetZoom" aria-label="Reset zoom">üîÑ</button>
                                </div>
                                <canvas id="dataChart" aria-label="Data chart showing original and cleaned time series"></canvas>
                            </div>
                            <div id="noDataMessage" class="no-data-message" role="alert" aria-live="assertive">
                                <span class="no-data-icon" aria-hidden="true">üì≠</span>
                                <span class="no-data-text" data-i18n="noData.title">–ù–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</span>
                                <span class="no-data-sub" data-i18n="noData.subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã</span>
                            </div>
                            <div id="dropOverlay" class="drop-overlay" aria-hidden="true">
                                <span class="drop-icon" aria-hidden="true">üìÇ</span>
                                <span class="drop-text" data-i18n="dropZone.text">–û—Ç–ø—É—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª –∑–¥–µ—Å—å</span>
                                <span class="drop-sub" data-i18n="dropZone.sub">TXT, DAT, CSV, ASC</span>
                            </div>
                        </div>

                        <!-- Table Container -->
                        <div class="table-container" id="tableContainer" style="display: none;" role="region" aria-labelledby="table-view-title">
                            <div class="table-toolbar">
                                <div class="table-controls">
                                    <label for="tableSeriesSelect" class="visually-hidden" id="table-view-title">–ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞–±–ª–∏—Ü—ã –¥–∞–Ω–Ω—ã—Ö</label>
                                    <select id="tableSeriesSelect" class="crt-select" aria-label="Select series">
                                        <option value="all" data-i18n="table.allSeries">–í—Å–µ —Å–µ—Ä–∏–∏</option>
                                    </select>
                                    <input type="text" id="tableFilter" class="crt-input" placeholder="–§–∏–ª—å—Ç—Ä..." data-i18n-placeholder="table.filterPlaceholder" aria-label="Filter table rows">
                                    <button id="exportTableBtn" class="crt-button" data-i18n="table.export" aria-label="Export table to CSV">
                                        <span class="button-icon" aria-hidden="true">üì§</span>
                                    </button>
                                </div>
                            </div>
                            <div class="data-table-wrapper">
                                <table id="dataTable" class="data-table" aria-labelledby="table-view-title">
                                    <thead>
                                        <tr>
                                            <th data-sort="index" onclick="handleTableSort('index')" data-i18n="table.index" scope="col">‚Ññ</th>
                                            <th data-sort="time" onclick="handleTableSort('time')" data-i18n="table.time" scope="col">–í—Ä–µ–º—è</th>
                                            <th id="tableSeriesHeader" data-sort="series" onclick="handleTableSort('series')" data-i18n="table.series" style="display: none;" scope="col">–°–µ—Ä–∏—è</th>
                                            <th data-sort="original" onclick="handleTableSort('original')" data-i18n="table.original" scope="col">–ò—Å—Ö–æ–¥–Ω—ã–π</th>
                                            <th data-sort="cleaned" onclick="handleTableSort('cleaned')" data-i18n="table.cleaned" scope="col">–û—á–∏—â–µ–Ω–Ω—ã–π</th>
                                            <th data-sort="status" onclick="handleTableSort('status')" data-i18n="table.status" scope="col">–°—Ç–∞—Ç—É—Å</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tableBody">
                                    </tbody>
                                </table>
                            </div>
                            <div class="table-pagination" role="navigation" aria-label="Table pagination">
                                <button id="prevPageBtn" class="crt-button" disabled aria-label="Previous page">‚óÄ</button>
                                <span id="pageInfo" class="page-info" aria-live="polite">–°—Ç—Ä. 1-50 –∏–∑ 100</span>
                                <button id="nextPageBtn" class="crt-button" disabled aria-label="Next page">‚ñ∂</button>
                            </div>
                            <div id="tableNoData" class="no-data-message" role="alert" aria-live="assertive" style="display: none;">
                                <span class="no-data-icon" aria-hidden="true">üìã</span>
                                <span class="no-data-text" data-i18n="noData.title">–ù–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</span>
                            </div>
                        </div>
                    </div>

                    <!-- Heatmap Tab -->
                    <div id="heatmapTab" class="tab-pane" role="tabpanel" aria-labelledby="heatmap-tab-btn">
                        <div class="heatmap-container">
                            <div class="chart-wrapper">
                                <canvas id="heatmapCanvas" aria-label="Parameter optimization heatmap"></canvas>
                                <div id="heatmapTooltip" class="heatmap-tooltip hidden" role="tooltip"></div>
                            </div>
                            <div id="noHeatmapMessage" class="no-data-message" role="alert">
                                <span class="no-data-icon" aria-hidden="true">üå°Ô∏è</span>
                                <span class="no-data-text" data-i18n="noHeatmap.title">–ö–∞—Ä—Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</span>
                                <span class="no-data-sub" data-i18n="noHeatmap.subtitle">–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Metrics Display -->
                <div class="metrics-panel" role="region" aria-labelledby="metrics-title">
                    <h2 class="section-title" id="metrics-title" data-i18n="section.metrics">–ú–ï–¢–†–ò–ö–ò –ö–ê–ß–ï–°–¢–í–ê</h2>
                    <div class="metrics-grid" role="list">
                        <div class="metric-card">
                            <span class="metric-name" data-metric="STDF" id="stdf-label">STDF</span>
                            <span class="metric-desc" id="stdf-desc" data-i18n="metric.STDF">–ì–ª–∞–¥–∫–æ—Å—Ç—å</span>
                            <span id="metricSTDF" class="metric-value" aria-labelledby="stdf-label stdf-desc">--</span>
                        </div>
                        <div class="metric-card">
                            <span class="metric-name" data-metric="DF" id="df-label">DF</span>
                            <span class="metric-desc" id="df-desc" data-i18n="metric.DF">–î–æ–ª—è —É–¥–∞–ª—ë–Ω–Ω—ã—Ö</span>
                            <span id="metricDF" class="metric-value" aria-labelledby="df-label df-desc">--</span>
                        </div>
                        <div class="metric-card">
                            <span class="metric-name" data-metric="ASNR" id="asnr-label">ASNR</span>
                            <span class="metric-desc" id="asnr-desc" data-i18n="metric.ASNR">–°/–® (–¥–ë)</span>
                            <span id="metricASNR" class="metric-value" aria-labelledby="asnr-label asnr-desc">--</span>
                        </div>
                        <div class="metric-card">
                            <span class="metric-name" data-metric="RMSE" id="rmse-label">RMSE</span>
                            <span class="metric-desc" id="rmse-desc" data-i18n="metric.RMSE">–°–ö–û</span>
                            <span id="metricRMSE" class="metric-value" aria-labelledby="rmse-label rmse-desc">--</span>
                        </div>
                        <div class="metric-card">
                            <span class="metric-name" data-metric="RSquared" id="rsquared-label">R¬≤</span>
                            <span class="metric-desc" id="rsquared-desc" data-i18n="metric.RSquared">–î–µ—Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—è</span>
                            <span id="metricRSquared" class="metric-value" aria-labelledby="rsquared-label rsquared-desc">--</span>
                        </div>
                        <div class="metric-card">
                            <span class="metric-name" data-metric="Pearson" id="pearson-label">R –ü–∏—Ä—Å–æ–Ω–∞</span>
                            <span class="metric-desc" id="pearson-desc" data-i18n="metric.Pearson">–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è</span>
                            <span id="metricPearson" class="metric-value" aria-labelledby="pearson-label pearson-desc">--</span>
                        </div>
                    </div>
                </div>

                <!-- File Info -->
                <div class="file-info-panel">
                    <h2 class="section-title" data-i18n="section.fileInfo">–ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –§–ê–ô–õ–ï</h2>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label" data-i18n="info.filename">–§–∞–π–ª:</span>
                            <span id="infoFilename" class="info-value">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label" data-i18n="info.size">–†–∞–∑–º–µ—Ä:</span>
                            <span id="infoSize" class="info-value">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label" data-i18n="info.points">–¢–æ—á–µ–∫:</span>
                            <span id="infoPoints" class="info-value">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label" data-i18n="info.series">–°–µ—Ä–∏–µ–≤:</span>
                            <span id="infoSeries" class="info-value">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label" data-i18n="info.optWindow">–û–ø—Ç. –æ–∫–Ω–æ:</span>
                            <span id="infoOptWindow" class="info-value">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label" data-i18n="info.optThreshold">–û–ø—Ç. –ø–æ—Ä–æ–≥:</span>
                            <span id="infoOptThreshold" class="info-value">--</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Footer -->
        <footer class="telemetry-footer">
            <div class="footer-decoration"></div>
            <div class="footer-content">
                <span class="footer-text" data-i18n="footer.text">–û–¢–ö-001 /// –°–ò–°–¢–ï–ú–ê –û–ß–ò–°–¢–ö–ò –î–ê–ù–ù–´–• –í–†–ï–ú–ï–ù–ù–´–• –†–Ø–î–û–í</span>
                <span class="footer-separator">|</span>
                <span class="footer-author" data-i18n="footer.author">–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: –§—É–Ω—Ç–∏–∫–æ–≤ –í.–ú.</span>
                <span class="footer-separator">|</span>
                <span class="footer-version" data-i18n="footer.version">–í–µ—Ä—Å–∏—è: 2.0 (Web)</span>
            </div>
            <div class="footer-decoration"></div>
        </footer>
    </div>

    <!-- Fixed Progress Bar (Top) -->
    <div id="progressBar" class="progress-bar hidden">
        <div class="progress-bar-content">
            <span class="progress-label" data-i18n="progress.label">–•–û–î –ü–†–û–¶–ï–°–°–ê</span>
            <div class="progress-track">
                <div id="progressFill" class="progress-fill"></div>
            </div>
            <span id="progressPercent" class="progress-percent">0%</span>
            <span id="progressMessage" class="progress-message"></span>
            <span id="progressETA" class="progress-eta hidden"></span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/main.js"></script>
</body>
</html>
